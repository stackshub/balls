{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/game/Shape.js","webpack:///./src/index.js","webpack:///./src/game/Container.js","webpack:///./src/balls/Stage.js","webpack:///./src/balls/Field.js","webpack:///./src/game/Circle.js","webpack:///./src/game/RoundRect.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Shape","x","y","w","h","options","k","this","defineProperties","cx","set","cy","Math","min","abs","nx","ny","mx","my","contains","applyFill","context","fill","fillStyle","applyStroke","stroke","strokeStyle","getTextX","textAlign","getTextY","textBaseline","render","save","draw","text","textFill","fillText","textStroke","strokeText","restore","RightAngles","PI","drawRect","beginPath","rect","closePath","drawRoundRect","roundFactor","rr","arc","drawCircle","drawPolygon","vertexCount","rotationAngle","undefined","moveTo","cos","sin","da","a","lineTo","drawPolystar","concaveFactor","cr","Container","Stage","window","stage","container","canvas","document","createElement","getContext","lastFrameTime","self","listen","target","type","listener","addEventListener","listenPointer","mouseType","touchType","event","preventDefault","stopPropagation","convertX","clientX","convertY","clientY","request","touch","changedTouches","listenKey","altKey","ctrlKey","metaKey","style","position","left","top","background","coordinate","body","overflow","appendChild","focus","onReady","onLoad","onHashChange","getHash","onResize","onPointerDown","onPointerMove","onPointerUp","onKeyDown","onKeyUp","width","innerWidth","height","innerHeight","scale","offsetX","offsetY","scrollTop","scrollTo","canvasX","canvasY","requestAnimationFrame","time","update","clearRect","setTransform","font","lineWidth","setTimeout","handler","delay","clearTimeout","timeoutId","setInterval","clearInterval","intervalId","now","performance","openUrl","url","parent","location","href","getSearchParams","search","substring","split","reduce","prev","curr","nameValue","map","decodeURIComponent","replace","hash","slice","replaceHash","history","replaceState","pathname","Field","RoundRect","params","ballCount","parseInt","shotCount","duration","maxScore","calculateScore","field","shotOutput","scoreOutput","durationOutput","titleLabel","startButton","readmeButton","resultButton","goHome","scene","Scenes","Home","goPlay","Play","Result","init","ceil","start","goResult","score","balls","length","restDuration","ret","tick","restShotCount","Circle","gravity","Array","ballR","ballRR","speed","random","angle","BallColors","vx","vy","tickBalls","removeBalls","mark","state","States","Ready","Running","pause","shoot","Waiting","startTime","lastTickTime","ball","dx","dy","splice","push","Finished","tickTime","dt","clip","globalCompositeOperation","j"],"mappings":"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","file":"index.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = Shape;\n\nfunction Shape(x, y, w, h, options) {\n  this.x = x;\n  this.y = y;\n  this.w = w;\n  this.h = h;\n  for (var k in options) {\n    this[k] = options[k];\n  }\n}\n\nObject.defineProperties(Shape.prototype, {\n  cx: {\n    get: function() {\n      return this.x + this.w / 2;\n    },\n    set: function(value) {\n      this.x = value - this.w / 2;\n    }\n  },\n  cy: {\n    get: function() {\n      return this.y + this.h / 2;\n    },\n    set: function(value) {\n      this.y = value - this.h / 2;\n    }\n  },\n  r: {\n    get: function() {\n      return Math.min(Math.abs(this.w) / 2, Math.abs(this.h) / 2);\n    },\n    set: function(value) {\n      var cx = this.cx;\n      var cy = this.cy;\n      if (!(value > 0)) {\n        this.w = this.h = 0;\n        this.x = cx;\n        this.y = cy;\n        return;\n      }\n      var r = this.r;\n      if (!(r > 0)) {\n        this.w = this.h = value;\n        this.x = cx - value / 2;\n        this.y = cy - value / 2;\n        return;\n      }\n      var k = value / r;\n      this.w *= k;\n      this.h *= k;\n      this.x = cx - this.w / 2;\n      this.y = cy - this.h / 2;\n    }\n  },\n  nx: {\n    get: function() {\n      return this.w >= 0 ? this.x : this.x + this.w;\n    },\n    set: function(value) {\n      this.x = this.w >= 0 ? value : value - this.w;\n    }\n  },\n  ny: {\n    get: function() {\n      return this.h >= 0 ? this.y : this.y + this.h;\n    },\n    set: function(value) {\n      this.y = this.h >= 0 ? value : value - this.h;\n    }\n  },\n  mx: {\n    get: function() {\n      return this.w >= 0 ? this.x + this.w : this.x;\n    },\n    set: function(value) {\n      this.x = this.w >= 0 ? value - this.w : value;\n    }\n  },\n  my: {\n    get: function() {\n      return this.h >= 0 ? this.y + this.h : this.y;\n    },\n    set: function(value) {\n      this.y = this.h >= 0 ? value - this.h : value;\n    }\n  }\n});\n\nShape.prototype.contains = function(x, y) {\n  return x >= this.nx && x < this.mx && y >= this.ny && y < this.my;\n};\n\nShape.prototype.applyFill = function(context, fill) {\n  if (typeof fill === 'string') {\n    context.fillStyle = fill;\n    return;\n  }\n  for (var k in fill) {\n    context[k] = fill[k];\n  }\n};\n\nShape.prototype.applyStroke = function(context, stroke) {\n  if (typeof stroke === 'string') {\n    context.strokeStyle = stroke;\n    return;\n  }\n  for (var k in stroke) {\n    context[k] = stroke[k];\n  }\n};\n\nShape.prototype.getTextX = function(context) {\n  switch (context.textAlign) {\n  case 'left':\n    return this.nx;\n  case 'right':\n    return this.mx;\n  default:\n    return this.cx;\n  }\n};\n\nShape.prototype.getTextY = function(context) {\n  switch (context.textBaseline) {\n  case 'top':\n    return this.ny;\n  case 'bottom':\n    return this.my;\n  default:\n    return this.cy;\n  }\n};\n\nShape.prototype.render = function(context) {\n  context.save();\n  try {\n    if (this.draw) {\n      this.draw(context);\n      if (this.fill) {\n        this.applyFill(context, this.fill);\n        context.fill();\n      }\n      if (this.stroke) {\n        this.applyStroke(context, this.stroke);\n        context.stroke();\n      }\n    }\n    if (this.text) {\n      if (this.textFill) {\n        this.applyFill(context, this.textFill);\n        context.fillText(\n          this.text,\n          this.getTextX(context),\n          this.getTextY(context)\n        );\n      }\n      if (this.textStroke) {\n        this.applyStroke(context, this.textStroke);\n        context.strokeText(\n          this.text,\n          this.getTextX(context),\n          this.getTextY(context)\n        );\n      }\n    }\n  } finally {\n    context.restore();\n  }\n};\n\nShape.RightAngles = [0, Math.PI * 0.5, Math.PI, Math.PI * 1.5, Math.PI * 2];\n\nShape.drawRect = function(context, x, y, w, h) {\n  context.beginPath();\n  context.rect(x, y, w, h);\n  context.closePath();\n};\n\nShape.drawRoundRect = function(context, nx, ny, mx, my, r, roundFactor) {\n  var rr = r * roundFactor;\n  nx += rr;\n  ny += rr;\n  mx -= rr;\n  my -= rr;\n  context.beginPath();\n  context.arc(nx, ny, rr, Shape.RightAngles[2], Shape.RightAngles[3]);\n  context.arc(mx, ny, rr, Shape.RightAngles[3], Shape.RightAngles[4]);\n  context.arc(mx, my, rr, 0, Shape.RightAngles[1]);\n  context.arc(nx, my, rr, Shape.RightAngles[1], Shape.RightAngles[2]);\n  context.closePath();\n};\n\nShape.drawCircle = function(context, cx, cy, r) {\n  context.beginPath();\n  context.arc(cx, cy, r, 0, Shape.RightAngles[4]);\n  context.closePath();\n};\n\nShape.drawPolygon = function(context, cx, cy, r, vertexCount, rotationAngle) {\n  if (vertexCount === undefined) {\n    vertexCount = 5;\n  }\n  if (rotationAngle === undefined) {\n    rotationAngle = Shape.RightAngles[3];\n  }\n  context.beginPath();\n  context.moveTo(\n    cx + r * Math.cos(rotationAngle),\n    cy + r * Math.sin(rotationAngle)\n  );\n  var da = Shape.RightAngles[4] / vertexCount;\n  for (var i = 1, a = rotationAngle + da; i < vertexCount; i++, a += da) {\n    context.lineTo(cx + r * Math.cos(a), cy + r * Math.sin(a));\n  }\n  context.closePath();\n};\n\nShape.drawPolystar = function(\n  context,\n  cx,\n  cy,\n  r,\n  vertexCount,\n  rotationAngle,\n  concaveFactor\n) {\n  if (vertexCount === undefined) {\n    vertexCount = 5;\n  }\n  if (rotationAngle === undefined) {\n    rotationAngle = Shape.RightAngles[3];\n  }\n  if (concaveFactor === undefined) {\n    concaveFactor = 0.5;\n  }\n  context.beginPath();\n  context.moveTo(\n    cx + r * Math.cos(rotationAngle),\n    cy + r * Math.sin(rotationAngle)\n  );\n  var cr = r * concaveFactor;\n  var da = Shape.RightAngles[2] / vertexCount;\n  var a = rotationAngle + da;\n  context.lineTo(cx + cr * Math.cos(a), cy + cr * Math.sin(a));\n  for (var i = 1; i < vertexCount; i++) {\n    a += da;\n    context.lineTo(cx + r * Math.cos(a), cy + r * Math.sin(a));\n    a += da;\n    context.lineTo(cx + cr * Math.cos(a), cy + cr * Math.sin(a));\n  }\n  context.closePath();\n};\n","/* global window */\n(function() {\n  'use strict';\n  var Container = require('./game/Container');\n  var Stage = require('./balls/Stage');\n  new Container(window, new Stage());\n})();\n","module.exports = Container;\n\nfunction Container(window, stage) {\n  this.window = window;\n  this.stage = stage;\n  stage.container = this;\n  this.canvas = window.document.createElement('canvas');\n  this.context = this.canvas.getContext('2d');\n  this.lastFrameTime = 0;\n\n  var self = this;\n  listen(window, 'DOMContentLoaded', function(event) {\n    self.canvas.style.position = 'absolute';\n    self.canvas.style.left = '0px';\n    self.canvas.style.top = '0px';\n    if (stage.background) {\n      self.canvas.style.background = stage.background;\n    }\n    self.coordinate();\n    self.window.document.body.style.overflow = 'hidden';\n    self.window.document.body.appendChild(self.canvas);\n    self.window.focus();\n    if (stage.onReady) {\n      if (stage.onReady(event) == false) {\n        return;\n      }\n    }\n    self.request();\n  });\n  if (stage.onLoad) {\n    listen(this.window, 'load', function(event) {\n      if (stage.onLoad(event) == false) {\n        return;\n      }\n      self.request();\n    });\n  }\n  if (stage.onHashChange) {\n    listen(this.window, 'hashchange', function(event) {\n      if (stage.onHashChange(self.getHash(), event) == false) {\n        return;\n      }\n      self.request();\n    });\n  }\n  listen(this.window, 'resize', function(event) {\n    self.coordinate();\n    if (stage.onResize) {\n      if (stage.onResize(event) == false) {\n        return;\n      }\n    }\n    self.request();\n  });\n  if (stage.onPointerDown) {\n    listenPointer('mousedown', 'touchstart', stage.onPointerDown.bind(stage));\n  }\n  if (stage.onPointerMove) {\n    listenPointer('mousemove', 'touchmove', stage.onPointerMove.bind(stage));\n  }\n  if (stage.onPointerUp) {\n    listenPointer('mouseup', 'touchend', stage.onPointerUp.bind(stage));\n  }\n  if (stage.onKeyDown) {\n    listenKey('keydown', stage.onKeyDown.bind(stage));\n  }\n  if (stage.onKeyUp) {\n    listenKey('keyup', stage.onKeyUp.bind(stage));\n  }\n\n  function listen(target, type, listener) {\n    target.addEventListener(type, listener, false);\n  }\n\n  function listenPointer(mouseType, touchType, listener) {\n    listen(self.canvas, mouseType, function(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var x = self.convertX(event.clientX);\n      var y = self.convertY(event.clientY);\n      if (listener(x, y, event) == false) {\n        return;\n      }\n      self.request();\n    });\n    listen(self.canvas, touchType, function(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      var touch = event.changedTouches[0];\n      var x = self.convertX(touch.clientX);\n      var y = self.convertY(touch.clientY);\n      if (listener(x, y, event) == false) {\n        return;\n      }\n      self.request();\n    });\n  }\n\n  function listenKey(type, listener) {\n    listen(self.window, type, function(event) {\n      if (event.altKey || event.ctrlKey || event.metaKey) {\n        return;\n      }\n      event.preventDefault();\n      event.stopPropagation();\n      if (listener(event.key, event) != false) {\n        self.request();\n      }\n    });\n  }\n}\n\nContainer.prototype.coordinate = function() {\n  this.canvas.width = this.window.innerWidth;\n  this.canvas.height = this.window.innerHeight;\n  this.scale = Math.min(\n    this.canvas.width / this.stage.w,\n    this.canvas.height / this.stage.h\n  );\n  this.offsetX = (this.canvas.width - this.stage.w * this.scale) / 2;\n  this.offsetY = (this.canvas.height - this.stage.h * this.scale) / 2;\n  if (this.window.scrollTop !== 0) {\n    this.window.scrollTo(0, 0);\n  }\n};\n\nContainer.prototype.convertX = function(canvasX) {\n  return (canvasX - this.offsetX) / this.scale;\n};\n\nContainer.prototype.convertY = function(canvasY) {\n  return (canvasY - this.offsetY) / this.scale;\n};\n\nContainer.prototype.request = function() {\n  var self = this;\n  this.window.requestAnimationFrame(function(time) {\n    if (time === self.lastFrameTime) {\n      return;\n    }\n    if (self.stage.update) {\n      if (self.stage.update(time, self.lastFrameTime) != false) {\n        self.request();\n      }\n    }\n    self.lastFrameTime = time;\n    if (!self.stage.render) {\n      return;\n    }\n    self.context.clearRect(0, 0, self.canvas.width, self.canvas.height);\n    self.context.save();\n    try {\n      self.context.setTransform(\n        self.scale,\n        0,\n        0,\n        self.scale,\n        self.offsetX,\n        self.offsetY\n      );\n      self.context.textAlign = 'center';\n      self.context.textBaseline = 'middle';\n      self.context.font = '16px sans-serif';\n      self.context.lineWidth = 2;\n      for (var k in self.stage.style) {\n        self.context[k] = self.stage.style[k];\n      }\n      self.stage.render(self.context);\n    } finally {\n      self.context.restore();\n    }\n  });\n};\n\nContainer.prototype.setTimeout = function(handler, delay) {\n  var self = this;\n  return this.window.setTimeout(function() {\n    if (handler() == false) {\n      return;\n    }\n    self.request();\n  }, delay);\n};\n\nContainer.prototype.clearTimeout = function(timeoutId) {\n  this.window.clearTimeout(timeoutId);\n};\n\nContainer.prototype.setInterval = function(handler, delay) {\n  var self = this;\n  return this.window.setInterval(function() {\n    if (handler() == false) {\n      return;\n    }\n    self.request();\n  }, delay);\n};\n\nContainer.prototype.clearInterval = function(intervalId) {\n  this.window.clearInterval(intervalId);\n};\n\nContainer.prototype.now = function() {\n  return this.window.performance.now();\n};\n\nContainer.prototype.openUrl = function(url) {\n  this.window.parent.location.href = url;\n};\n\nContainer.prototype.getSearchParams = function() {\n  if (!this.window.location.search) {\n    return {};\n  }\n  return this.window.location.search\n    .substring(1)\n    .split('&')\n    .reduce(function(prev, curr) {\n      var nameValue = curr.split('=').map(function(x) {\n        return decodeURIComponent(x.replace(/\\+/g, '%20'));\n      });\n      prev[nameValue[0]] = nameValue[1];\n      return prev;\n    }, {});\n};\n\nContainer.prototype.getHash = function() {\n  return this.window.location.hash.slice(1);\n};\n\nContainer.prototype.replaceHash = function(hash) {\n  this.window.history.replaceState(\n    null,\n    null,\n    hash\n      ? '#' + hash\n      : this.window.location.pathname + this.window.location.search\n  );\n};\n","var Field = require('./Field');\nvar RoundRect = require('../game/RoundRect');\nvar Shape = require('../game/Shape');\n\nmodule.exports = Stage;\n\nfunction Stage() {\n  this.w = 360;\n  this.h = 360;\n  this.background = '#222';\n}\n\nStage.prototype.onReady = function() {\n  var params = this.container.getSearchParams();\n  this.ballCount = parseInt(params.ballCount) || 30;\n  this.shotCount = parseInt(params.shotCount) || 10;\n  this.duration = parseInt(params.duration) || 30000;\n  this.maxScore = Field.calculateScore(this.ballCount, 0, 0);\n  this.field = new Field(30, 50, 300, 300);\n  this.shotOutput = new Shape(30, 10, 100, 30, { textFill: 'white' });\n  this.scoreOutput = new Shape(130, 10, 100, 30, { textFill: 'white' });\n  this.durationOutput = new Shape(230, 10, 100, 30, { textFill: 'white' });\n  this.titleLabel = new Shape(0, 80, 360, 60, {\n    text: 'Balls in Slow',\n    textFill: { fillStyle: 'white', font: '32px sans-serif' }\n  });\n  this.startButton = new RoundRect(90, 170, 180, 60, {\n    stroke: 'white',\n    text: 'Start',\n    textFill: 'white'\n  });\n  this.readmeButton = new RoundRect(90, 260, 180, 60, {\n    stroke: 'white',\n    text: 'Readme',\n    textFill: 'white'\n  });\n  this.resultButton = new RoundRect(90, 170, 180, 60, {\n    stroke: 'white',\n    textFill: 'white'\n  });\n  this.resultButton = new RoundRect(90, 170, 180, 60, {\n    stroke: 'white',\n    textFill: 'white'\n  });\n  this.goHome();\n};\n\nStage.prototype.onPointerDown = function(x, y) {\n  switch (this.scene) {\n  case Scenes.Home:\n    if (this.startButton.contains(x, y)) {\n      this.goPlay();\n    } else if (this.readmeButton.contains(x, y)) {\n      this.container.openUrl(\n        'https://github.com/stackshub/balls/blob/master/README.md'\n      );\n    }\n    break;\n  case Scenes.Play:\n    if (this.field.contains(x, y)) {\n      this.field.onPointerDown(x, y);\n    }\n    break;\n  case Scenes.Result:\n    if (this.resultButton.contains(x, y)) {\n      this.goHome();\n    }\n    break;\n  }\n};\n\nStage.prototype.goHome = function() {\n  this.field.init(this.ballCount, this.shotCount, this.duration);\n  this.shotOutput.text = this.shotCount;\n  this.scoreOutput.text = this.maxScore;\n  this.durationOutput.text = Math.ceil(this.duration / 1000);\n  this.scene = Scenes.Home;\n};\n\nStage.prototype.goPlay = function() {\n  this.field.start(this.container.now());\n  this.scene = Scenes.Play;\n};\n\nStage.prototype.goResult = function() {\n  if (this.field.score > this.maxScore) {\n    this.resultButton.text = 'New Record';\n    this.maxScore = this.field.score;\n  } else if (!this.field.balls.length) {\n    this.resultButton.text = 'Completed';\n  } else if (!this.field.restDuration) {\n    this.resultButton.text = 'Time\\'s Up';\n  } else {\n    this.resultButton.text = 'Finished';\n  }\n  this.scene = Scenes.Result;\n};\n\nStage.prototype.update = function() {\n  var ret = false;\n  if (this.scene === Scenes.Play) {\n    ret = this.field.tick(this.container.now());\n    this.shotOutput.text = '' + this.field.restShotCount;\n    this.scoreOutput.text = '' + this.field.score;\n    this.durationOutput.text = '' + Math.ceil(this.field.restDuration / 1000);\n    if (!ret) {\n      this.goResult();\n    }\n  }\n  return ret;\n};\n\nStage.prototype.render = function(context) {\n  switch (this.scene) {\n  case Scenes.Home:\n    this.titleLabel.render(context);\n    this.startButton.render(context);\n    this.readmeButton.render(context);\n    break;\n  case Scenes.Play:\n    this.field.render(context);\n    break;\n  case Scenes.Result:\n    this.field.render(context);\n    this.resultButton.render(context);\n    break;\n  }\n  this.shotOutput.render(context);\n  this.scoreOutput.render(context);\n  this.durationOutput.render(context);\n};\n\nvar Scenes = {\n  Home: 0,\n  Play: 1,\n  Result: 2\n};\n","var Shape = require('../game/Shape');\nvar Circle = require('../game/Circle');\n\nmodule.exports = Field;\n\nfunction Field(x, y, w, h) {\n  Shape.call(this, x, y, w, h);\n}\n\nField.prototype = Object.create(Shape.prototype);\n\nField.prototype.init = function(ballCount, shotCount, duration) {\n  this.ballCount = ballCount;\n  this.restShotCount = shotCount;\n  this.restDuration = duration;\n  this.score = 0;\n  this.gravity = 0.0005;\n  this.balls = new Array(this.ballCount);\n  this.ballR = 30;\n  this.ballRR = this.ballR * this.ballR;\n  for (var i = 0; i < this.ballCount; i++) {\n    var speed = 0.2 * Math.random();\n    var angle = Math.PI * 2 * Math.random();\n    this.balls[i] = new Circle(\n      this.x + this.w * Math.random(),\n      this.y + this.h * Math.random() * 0.8,\n      this.ballR,\n      {\n        fill: BallColors[(i % 3) + 1],\n        vx: speed * Math.cos(angle),\n        vy: speed * Math.sin(angle)\n      }\n    );\n  }\n  for (var t = 0; t < 500; t++) {\n    this.tickBalls(20);\n  }\n  this.removeBalls = [];\n  this.mark = new Shape(0, 0, 20, 20, { textFill: BallColors[0] });\n  this.state = States.Ready;\n};\n\nField.prototype.onPointerDown = function(x, y) {\n  if (this.restShotCount <= 0) {\n    return;\n  }\n  if (this.state === States.Running) {\n    this.pause();\n    if (this.balls.length <= 1) {\n      this.shoot(x, y);\n    }\n  } else if (this.state === States.Waiting) {\n    this.shoot(x, y);\n  }\n};\n\nField.prototype.start = function(startTime) {\n  this.lastTickTime = startTime;\n  this.state = States.Running;\n};\n\nField.prototype.pause = function() {\n  this.removeBalls.length = 0;\n  this.mark.text = null;\n  this.state = States.Waiting;\n};\n\nField.prototype.shoot = function(x, y) {\n  for (var i = this.balls.length - 1; i >= 0; i--) {\n    var ball = this.balls[i];\n    var dx = x - ball.cx;\n    var dy = y - ball.cy;\n    if (dx * dx + dy * dy > this.ballRR) {\n      continue;\n    }\n    this.balls.splice(i, 1);\n    ball.stroke = ball.fill;\n    ball.fill = null;\n    this.removeBalls.push(ball);\n  }\n  this.score += Field.calculateScore(this.removeBalls.length, 0, 0);\n  this.mark.text = '' + this.removeBalls.length;\n  this.mark.cx = x;\n  this.mark.cy = y;\n  this.restShotCount--;\n  if (!this.balls.length) {\n    this.score += Field.calculateScore(\n      0,\n      this.restShotCount,\n      this.restDuration\n    );\n    this.state = States.Finished;\n    return;\n  }\n  if (!this.restShotCount) {\n    this.state = States.Finished;\n    return;\n  }\n  if (this.balls.length <= 1) {\n    this.balls[0].fill = BallColors[0];\n  }\n  this.state = States.Running;\n};\n\nField.prototype.tick = function(tickTime) {\n  if (this.state === States.Finished) {\n    return false;\n  }\n  var dt = tickTime - this.lastTickTime;\n  this.lastTickTime = tickTime;\n  this.restDuration -= dt;\n  if (this.restDuration <= 0) {\n    this.restDuration = 0;\n    this.state = States.Finished;\n    return false;\n  }\n  if (this.state === States.Waiting) {\n    dt *= 0.01;\n  }\n  this.tickBalls(dt * (3 - (2 * this.balls.length) / this.ballCount));\n  return true;\n};\n\nField.prototype.tickBalls = function(dt) {\n  for (var i = 0; i < this.balls.length; i++) {\n    var ball = this.balls[i];\n    ball.x += ball.vx * dt;\n    if (ball.cx < this.x) {\n      ball.cx = this.x * 2 - ball.cx;\n      ball.vx *= -1;\n    } else if (ball.cx > this.mx) {\n      ball.cx = this.mx * 2 - ball.cx;\n      ball.vx *= -1;\n    }\n    ball.vy += this.gravity * dt;\n    ball.y += ball.vy * dt;\n    if (ball.cy > this.my) {\n      ball.cy = this.my * 2 - ball.cy;\n      ball.vy *= -1;\n    }\n  }\n};\n\nField.prototype.render = function(context) {\n  context.save();\n  try {\n    context.beginPath();\n    context.rect(this.x, this.y, this.w, this.h);\n    context.closePath();\n    context.fillStyle = 'black';\n    context.fill();\n    context.clip();\n    context.globalCompositeOperation = 'lighter';\n    for (var i = 0; i < this.balls.length; i++) {\n      this.balls[i].render(context);\n    }\n    for (var j = 0; j < this.removeBalls.length; j++) {\n      this.removeBalls[j].render(context);\n    }\n    this.mark.render(context);\n  } finally {\n    context.restore();\n  }\n};\n\nField.calculateScore = function(ballCount, shotCount, duration) {\n  return ballCount * 1000 + shotCount * 100 + Math.ceil(duration / 1000);\n};\n\nvar States = {\n  Ready: 0,\n  Running: 1,\n  Waiting: 2,\n  Finished: 3\n};\n\nvar BallColors = ['#ccc', '#c00', '#0c0', '#00c'];\n","var Shape = require('./Shape');\n\nmodule.exports = Circle;\n\nfunction Circle(cx, cy, r, options) {\n  var d = r * 2;\n  Shape.call(this, cx - r, cy - r, d, d, options);\n}\n\nCircle.prototype = Object.create(Shape.prototype);\n\nCircle.prototype.draw = function(context) {\n  Shape.drawCircle(context, this.cx, this.cy, this.r);\n};\n","var Shape = require('./Shape');\n\nmodule.exports = RoundRect;\n\nfunction RoundRect(x, y, w, h, options) {\n  Shape.call(this, x, y, w, h, options);\n  if (this.roundFactor === undefined) {\n    this.roundFactor = 0.5;\n  }\n}\n\nRoundRect.prototype = Object.create(Shape.prototype);\n\nRoundRect.prototype.draw = function(context) {\n  Shape.drawRoundRect(\n    context,\n    this.nx,\n    this.ny,\n    this.mx,\n    this.my,\n    this.r,\n    this.roundFactor\n  );\n};\n"],"sourceRoot":""}